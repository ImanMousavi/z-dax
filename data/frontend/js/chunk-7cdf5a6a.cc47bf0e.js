(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7cdf5a6a"],{"213d":function(t,e,s){"use strict";(function(t,a){s("96cf");var o=s("3b8d"),n=s("9190"),r=s("b056");e.a={components:{"auth-input":n.a},mixins:[r.a],data:function(){return{step:1,old_password:"",new_password:"",confirm_password:"",otp_code:""}},methods:{vaildPassword:function(){this.step;var e=this.old_password,s=this.new_password,a=this.confirm_password;return!(e&&s&&a)||!e||e===s||t.validPassword(s)||t.validPassword(s,a)},resetInput:function(){this.old_password=this.new_password=this.confirm_password="",this.resetStep()},checkPassword:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.modal.loading_button=!0,e.prev=1,e.next=4,new a("auth").post("resource/users/checkpassword",{password:this.old_password});case 4:this.step++,t.runNotice("warning","U need enter otp code to continue"),this.modal.loading_button=!0,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),this.modal.loading_button=!1,e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),changePSW:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var s,o,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.modal.loading_button=!0,s=this.old_password,o=this.new_password,n=this.confirm_password,r=this.otp_code,e.prev=2,e.next=5,new a("auth").put("resource/users/password",{old_password:s,new_password:o,confirm_password:n,otp_code:r});case 5:this.modal.loading_button=!1,this.remove(),t.runNotice("success","Password changed"),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(2),this.modal.loading_button=!1,e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(){return e.apply(this,arguments)}}()}}}).call(this,s("ddc4"),s("1e6b").ApiClient)},"7df2":function(t,e,s){"use strict";var a=s("213d").a,o=s("2877"),n=Object(o.a)(a,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{"wrap-class-name":"password-modal",footer:null,width:400},on:{cancel:t.onChangeShow,ok:t.onChangeShow},model:{value:t.modal.enabled,callback:function(e){t.$set(t.modal,"enabled",e)},expression:"modal.enabled"}},[t.$store.state.user.otp?t.$store.state.user.otp&&1===t.step?a("div",[a("img",{staticClass:"logo-modal",attrs:{src:s("f567")}}),a("div",{staticClass:"title"},[t._v("\n      Change password\n    ")]),a("div",{staticClass:"desc"},[t._v("\n      Donâ€™t forget that your new pasword has to be different from the previous\n      one.\n    ")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.checkPassword()}}},[a("auth-input",{ref:"old_password",attrs:{name:"old_password",type:"password",value:t.old_password,"class-name":{g:t.old_password},placeholder:"Old Password","label-need":!0},model:{value:t.old_password,callback:function(e){t.old_password=e},expression:"old_password"}}),a("auth-input",{ref:"new_password",attrs:{name:"new_password",type:"password",value:t.new_password,"class-name":{g:t.new_password},placeholder:"New Password","label-need":!0},model:{value:t.new_password,callback:function(e){t.new_password=e},expression:"new_password"}}),a("auth-input",{ref:"confirm_password",attrs:{name:"confirm_password",type:"password",value:t.confirm_password,"class-name":{g:t.confirm_password},placeholder:"Confirm Password","label-need":!0},model:{value:t.confirm_password,callback:function(e){t.confirm_password=e},expression:"confirm_password"}}),a("button",{attrs:{type:"submit",disabled:t.vaildPassword()}},[t.modal.loading_button?a("a-icon",{staticStyle:{"font-size":"24px"},attrs:{type:"loading",spin:""}}):t._e(),t._v("\n        Save\n      ")],1)],1)]):t.$store.state.user.otp&&2===t.step?a("div",[a("img",{staticClass:"logo-modal",attrs:{src:s("f567")}}),a("div",{staticClass:"title"},[t._v("\n      Google Authentication\n    ")]),a("div",{staticClass:"desc"},[t._v("\n      Enter the authentication code from the app below.\n    ")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.changePSW(e)}}},[a("auth-input",{ref:"otp_code",attrs:{name:"otp_code",value:t.otp_code,"class-name":{g:t.otp_code},placeholder:"2FA Code","label-need":!0,maxlength:"6",type:"number"},model:{value:t.otp_code,callback:function(e){t.otp_code=e},expression:"otp_code"}}),a("button",{attrs:{type:"submit",disabled:!(6===t.otp_code.length)}},[t.modal.loading_button?a("a-icon",{staticStyle:{"font-size":"24px"},attrs:{type:"loading",spin:""}}):t._e(),t._v("\n        "+t._s(t.$t("auth.confirm"))+"\n      ")],1)],1)]):t._e():a("need-security",{on:{closeModal:t.closeModal,changeModal:t.changeModal}})],1)}),[],!1,null,null,null);e.a=n.exports},ac86:function(t,e,s){"use strict";(function(t){var a=s("fe6f"),o=s("7df2"),n=s("efdb");e.a={components:{"modal-2fa":a.a,"modal-password":o.a},mixins:[n.a],data:function(){return{email:null,password:"**********"}},mounted:function(){var e=this.$store.state.user.email;this.email=t.emailEncode(e)}}}).call(this,s("ddc4"))},fb6e:function(t,e,s){"use strict";s.r(e);var a=s("ac86").a,o=s("2877"),n=Object(o.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"setting-main security"},[s("div",{staticClass:"setting-head"},[t._v(t._s(t.$t("usercenter.account_security.title")))]),s("div",{staticClass:"setting-body"},[s("table",{staticClass:"table"},t._l(t.$store.getters["user/getAccountSecurity"],(function(e,a){return s("tr",{key:a,staticClass:"row"},[s("td",{staticClass:"name",domProps:{innerHTML:t._s(e.name)}}),s("td",{staticClass:"desc",domProps:{innerHTML:t._s(e.desc)}}),s("td",{staticClass:"action"},[e.action.allow?s("a",{domProps:{innerHTML:t._s(e.action.text)},on:{click:function(s){return t.onClick(e.action.runner)}}}):t._e()])])})),0)]),s("modal-2fa",{ref:"2fa"}),s("modal-password",{ref:"password",on:{changeModal:t.onClick}})],1)}),[],!1,null,null,null);e.default=n.exports}}]);