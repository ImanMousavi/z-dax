(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2c530eb0"],{"65cf":function(t,e,a){"use strict";var n=(a("96cf"),a("3b8d")),o=a("9190"),s={mixins:[a("b056").a],data:function(){return{totp_code:"",step:1,value:{kid:"",secret:""}}},methods:{resetInput:function(){this.secret_key=this.access_key=this.totp_code="",this.resetStep()},createApi_Keys:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){var e,a,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.modal.loading_button=!0,"HS256",e=this.totp_code,t.prev=3,t.next=6,this.$store.dispatch("user/CREATE_API_KEYS",{algorithm:"HS256",totp_code:e});case 6:a=t.sent,n=a.kid,o=a.secret,this.resetInput(),this.modal.loading_button=!1,this.value={kid:n,secret:o},this.step++,t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(3),this.modal.loading_button=!1,t.abrupt("return",t.t0);case 19:case"end":return t.stop()}}),t,this,[[3,15]])})));return function(){return t.apply(this,arguments)}}(),onChangeShow:function(){this.resetInput()}},components:{"auth-input":o.a}},r=a("2877"),i=Object(r.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-modal",{attrs:{wrapClassName:"api-modal",footer:null,width:400},on:{cancel:t.onChangeShow,ok:t.onChangeShow},model:{value:t.modal.enabled,callback:function(e){t.$set(t.modal,"enabled",e)},expression:"modal.enabled"}},[t.$store.state.user.otp?1===t.step?n("div",[n("img",{staticClass:"logo-modal",attrs:{src:a("f567")}}),n("div",{staticClass:"title"},[t._v("Create ApiKey")]),n("div",{staticClass:"desc"},[t._v("Enter the authentication code from the app below.")]),n("form",{on:{submit:function(e){return e.preventDefault(),t.createApi_Keys(e)}}},[n("auth-input",{ref:"totp_code",attrs:{name:"totp_code",value:t.totp_code,"class-name":{g:t.totp_code},placeholder:"2FA Code","label-need":!0,maxlength:"6",type:"number"},model:{value:t.totp_code,callback:function(e){t.totp_code=e},expression:"totp_code"}}),n("button",{attrs:{type:"submit",disabled:!(6===t.totp_code.length)}},[t.modal.loading_button?n("a-icon",{staticStyle:{"font-size":"24px"},attrs:{type:"loading",spin:""}}):t._e(),t._v("\n        "+t._s(t.$t("auth.confirm"))+"\n      ")],1)],1)]):n("div",[n("div",{staticClass:"info-warning"},[n("a-icon",{attrs:{type:"warning"}}),n("p",[n("span",[t._v("API Key Created")]),n("br"),t._v("This information will be shown only once and cannot be retrieved\n        once lost. Please store it properly.\n      ")])],1),n("form",{on:{submit:function(e){return e.preventDefault(),t.remove(e)}}},[n("auth-input",{ref:"access_key",attrs:{name:"access_key",value:t.value.kid,"class-name":{g:t.value.kid},placeholder:"Access Key",maxlength:"6",type:"number","label-need":!0,copy:!0},model:{value:t.value.kid,callback:function(e){t.$set(t.value,"kid",e)},expression:"value.kid"}}),n("auth-input",{ref:"secret_key",attrs:{name:"secret_key",value:t.value.secret,"class-name":{g:t.value.secret},placeholder:"Secret Key",type:"number","label-need":!0,copy:!0},model:{value:t.value.secret,callback:function(e){t.$set(t.value,"secret",e)},expression:"value.secret"}}),n("button",{attrs:{type:"submit"},domProps:{textContent:t._s(t.$t("auth.confirm"))}})],1)]):n("need-security",{on:{closeModal:t.closeModal,changeModal:t.changeModal}})],1)}),[],!1,null,null,null);e.a=i.exports},"9edb":function(t,e,a){"use strict";a.r(e);var n=a("ee79").a,o=a("2877"),s=Object(o.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-main history"},[a("div",{staticClass:"setting-head"},[a("span",{domProps:{textContent:t._s(t.$t("usercenter.api.title"))}}),a("button",{on:{click:function(e){return t.onClick("api")}}},[t._v("\n      Create New\n    ")])]),a("div",{staticClass:"setting-body"},[a("table",{staticClass:"table table-head"},[a("thead",[a("th",{staticClass:"text-left",domProps:{textContent:t._s(t.$t("table.kid"))}}),a("th",{staticClass:"text-center",domProps:{textContent:t._s(t.$t("table.created"))}}),a("th",{staticClass:"text-right",domProps:{textContent:t._s(t.$t("table.action"))}})])]),a("div",{staticClass:"table-content"},[a("table",{staticClass:"table"},[a("tbody",t._l(t.api_keys.array,(function(e){return a("tr",{key:e.kid+"-"+e.state,staticClass:"api-row"},[a("td",{staticClass:"text-left",domProps:{textContent:t._s(e.kid)}}),a("td",{staticClass:"text-center",domProps:{textContent:t._s(t.getDate(e.created_at,!0))}}),a("td",{staticClass:"text-right"},[a("a-switch",{attrs:{checked:e.state.includes("active"),loading:e.loading},on:{change:function(a){return t.openModal(e.kid,"active"===e.state?"disabled":"active","totp")}}}),a("i",{staticClass:"ic-cha",on:{click:function(a){return t.openModal(e.kid,!1,"totp")}}})],1)])})),0)])]),t.isLoading?a("a-spin",{attrs:{size:"large"}},[a("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1):t._e(),t.api_keys.max>25?a("a-pagination",{attrs:{size:"small",current:t.api_keys.page,"page-size":25,total:t.api_keys.max},on:{change:t.onPageChange}}):t._e()],1),a("modal-2fa",{ref:"2fa"}),a("modal-api",{ref:"api",on:{changeModal:t.onClick}}),a("modal-totp",{ref:"totp",attrs:{payload:t.payload_modal},on:{onSubmit:t.onSubmitTotp,onFailed:t.modalClose}})],1)}),[],!1,null,null,null);e.default=s.exports},ee79:function(t,e,a){"use strict";(function(t){a("8e6e"),a("ac6a"),a("456d"),a("96cf");var n=a("3b8d"),o=(a("20d6"),a("bd86")),s=a("2f62"),r=a("fe6f"),i=a("65cf"),c=a("38da"),l=a("efdb");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}e.a={components:{"modal-2fa":r.a,"modal-api":i.a,"modal-totp":c.a},mixins:[l.a],data:function(){return{payload_modal:{kid:"",state:"",modal:""}}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(o.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(s.b)("user",["api_keys"]),{isLoading:function(){return this.api_keys.loading}}),mounted:function(){this.api_keys.loading||this.$store.dispatch("user/GET_API_KEYS",{page:1,limit:25})},methods:{modalClose:function(){var t=this.payload_modal.kid,e=this.getIndexApiKey(t);this.api_keys.array[e].loading=!1,this.api_keys.array[e].state+="_"},openModal:function(t,e,a){var n=this.getIndexApiKey(t);this.payload_modal={kid:t,state:e,modal:a},this.onClick(a),this.api_keys.array[n].loading=!0},getIndexApiKey:function(t){return this.api_keys.array.findIndex((function(e){return e.kid==t}))},onSubmitTotp:function(t,e){"totp"===t.modal?this.updateApiKey(t,e):this.removeApiKey(t,e)},updateApiKey:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e,a){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.kid,o=e.state,t.prev=1,t.next=4,this.$store.dispatch("user/UPDATE_API_KEYS",{kid:n,state_:o,totp_code:a});case 4:this.$refs.totp.remove(),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(e,a){return t.apply(this,arguments)}}(),removeApiKey:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e,a){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.kid,t.prev=1,t.next=4,this.$store.dispatch("user/DELETE_API_KEYS",{kid:n,totp_code:a});case 4:this.$refs.totp.remove(),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(e,a){return t.apply(this,arguments)}}(),onPageChange:function(t){this.$store.dispatch("user/GET_API_KEYS",{page:t,limit:25})},getDate:function(e){return t.getDate(e,!0)}}}}).call(this,a("ddc4"))}}]);