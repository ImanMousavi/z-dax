(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d0bd577"],{"2c1a":function(t,a,e){"use strict";e.r(a);var o=(e("96cf"),e("3b8d")),n=e("38da"),s=e("9190"),i=e("2db2"),l={components:{"auth-input":s.a,"modal-totp":n.a},mixins:[i.a],data:function(){return{loading:!1,email:"",password:"",otp_code:"",captcha_response:"",payload_modal:{}}},computed:{buttonDisabled:function(){var t=this.validEmail,a=this.password;return!(t&&a)},need2fa:{get:function(){return this.$store.state.user.need2fa},set:function(t){return this.$store.state.user.need2fa=t}}},watch:{need2fa:function(){this.need2fa&&this.openTotp()}},mounted:function(){},methods:{callLogin:function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(){var a,e,o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.email,e=this.password,o=this.otp_code,n=this.captcha_response,this.loading=!0,t.next=4,this.$store.dispatch("user/LOGIN",{email:a,password:e,otp_code:o,captcha_response:n});case 4:this.loading=!1;case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),login:function(){this.need2fa?this.otp_code.length>=6&&this.callLogin():this.callLogin()},modalClose:function(){this.need2fa=!1,this.payload_modal={}},onSubmitTotp:function(t,a){this.otp_code=a,this.login()},openTotp:function(){var t="totp";this.payload_modal={email:this.email,password:this.password,modal:t},this.openModal(t)},openModal:function(t){var a=this;this.$nextTick((function(){a.$refs[t].render()}))}}},r=e("2877"),d=Object(r.a)(l,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("z-content",{staticClass:"page-auth"},[e("div",{staticClass:"auth-box"},[e("div",[e("h3",{staticClass:"title",domProps:{textContent:t._s(t.$t("auth.login"))}}),e("form",{on:{submit:function(a){return a.preventDefault(),t.login(a)}}},[e("auth-input",{attrs:{name:"email","class-name":{ierror:!t.validEmail&&""!=t.email,g:t.email},"label-class":{berror:!t.validEmail&&""!=t.email},placeholder:t.$t("placeholder.email"),"label-need":!0,"enable-vaild":!t.validEmail&&""!=t.email,"error-text":t.translation("email")},model:{value:t.email,callback:function(a){t.email=a},expression:"email"}}),e("auth-input",{attrs:{name:"password",type:"password","class-name":{g:t.password},placeholder:t.$t("placeholder.password"),"label-need":!0},model:{value:t.password,callback:function(a){t.password=a},expression:"password"}}),e("button",{attrs:{type:"submit",disabled:t.buttonDisabled}},[t.loading?e("a-icon",{staticStyle:{"font-size":"24px"},attrs:{type:"loading",spin:""}}):t._e(),t._v("\n          "+t._s(t.$t("auth.login"))+"\n        ")],1),e("div",[e("router-link",{staticClass:"forgot",attrs:{to:"forgotpassword"}},[t._v("\n            Forgot Password?\n          ")]),e("i18n",{staticClass:"text-right signup",attrs:{path:"auth.no_account",tag:"div"}},[e("router-link",{attrs:{to:"signup"},domProps:{textContent:t._s(t.$t("auth.to_sign_up"))}})],1)],1)],1)])]),e("modal-totp",{ref:"totp",attrs:{payload:t.payload_modal},on:{onSubmit:t.onSubmitTotp,onFailed:t.modalClose}})],1)}),[],!1,null,null,null);a.default=d.exports}}]);